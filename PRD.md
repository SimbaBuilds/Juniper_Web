We are implementing payments with Stripe.  I have done this before, but I want you to implement.  
1. Please research most up to date Stripe docs.  
2. Then research best practices for implementing stripe in this NextJS version, paying particualr attention to server vs client components and environment variables and security.  
3. Add necessary fields to the user profiles table
4. Create checkout. portal, usage, and webhook .ts files and routes
5. Create necessary components in the account page
6. Complete the implementation with all needed code and anything else you deem necessary.